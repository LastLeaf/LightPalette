// Copyright 2014 LastLeaf, LICENSE: github.lastleaf.me/MIT
"use strict";fw.main(function(t){var e=t.tmpl,a=e.i18n;lp.registerDriver("article",{name:a("Article"),priority:1e4,editor:function(t,a){a.driver||(a.driver={});var r="tinymce-"+(new Date).getTime(),i=$(t).html(e.article({tinymceId:r,content:a.content,abstractManual:a.driver.abstract||""}));return tinymce.init({selector:"#"+r,theme:"modern",height:400,plugins:["anchor charmap code contextmenu hr image link lists paste searchreplace table textcolor"],menubar:"edit insert view format table tools",toolbar:"styleselect | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | removeformat",statusbar:!0,style_formats:[{title:"Heading 1",block:"h1"},{title:"Heading 2",block:"h2"},{title:"Heading 3",block:"h3"},{title:"Blockquote",block:"blockquote"},{title:"Pre",block:"pre"}],content_css:"/~/backstage/drivers/article/skins/tinymce.css",language:fw.language,paste_as_text:!0,paste_word_valid_elements:["h1","h2","h3","img","blockquote","p","a","ul","ol","li","b","i","strong","em","strike","code","hr","br","div","table","thead","tbody","tr","th","td","pre","sup","sub","div","span"].join(",")}),i.find(".driver_abstract_enable").change(function(){var t="auto"!==$(this).val();t?i.find(".driver_abstract_manual").fadeIn(200):i.find(".driver_abstract_manual").fadeOut(200)}).val(a.driver.abstractType||"auto").change(),{get:function(){var t=tinymce.get(r).getContent(),e=i.find(".driver_abstract_enable").val(),a=i.find(".driver_abstract_manual").val();return"auto"===e&&(a=$(t).eq(0).prop("outerHTML")),{content:t,driver:{"abstract":a,abstractType:e}}}}}})});
