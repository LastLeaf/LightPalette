// Copyright 2014 LastLeaf, LICENSE: github.lastleaf.me/MIT
"use strict";fw.main(function(e){lp.drivers.init("presentation",function(t){var n=t.id,o=document.getElementById("driver-presentation"),l=document.createElement("div");l.className="post_presentation_content",o.parentElement.insertBefore(l,o),o.parentElement.removeChild(o);for(var c=o.querySelectorAll("a"),i=0;i<c.length;i++)c[i].getAttribute("target")||c[i].setAttribute("target","_blank");var r=document.createElement("iframe");r.style.display="block",r.style.width="100%",r.style.margin="0",r.style.padding="0",r.style.border="0 none",r.style.left="0px",r.style.right="0px",r.style.top="0px",r.style.bottom="0px",r.setAttribute("allowfullscreen",""),r.setAttribute("mozallowfullscreen",""),r.setAttribute("msallowfullscreen",""),r.setAttribute("webkitallowfullscreen","");var u=document.body.requestFullScreen||document.body.mozRequestFullScreen||document.body.msRequestFullScreen||document.body.webkitRequestFullScreen,s=document.cancelFullScreen||document.mozCancelFullScreen||document.msCancelFullScreen||document.webkitCancelFullScreen,d=function(){var e=r.contentWindow.document.isFullScreen;if("boolean"==typeof e)return e;var e=r.contentWindow.document.mozFullScreen;if("boolean"==typeof e)return e;var e=r.contentWindow.document.msIsFullScreen;if("boolean"==typeof e)return e;var e=r.contentWindow.document.webkitIsFullScreen;return"boolean"==typeof e?e:"static"!==r.style.position},a=function(){u?u.call(r.contentWindow.document.body):(r.style.position="fixed",r.style.height="100%")},m=function(){s?s.call(r.contentWindow.document):(r.style.position="static",r.style.height=9*r.clientWidth/16+"px")};l.appendChild(r),u&&(r.style.height=9*r.clientWidth/16+"px"),m(),r.contentWindow.document.open(),r.contentWindow.document.write(e.tmpl.presentation(o.outerHTML)),r.contentWindow.pg=fw.getPage(),r.contentWindow.postId=n,r.contentWindow.toggleFullScreen=function(){d()?m():a()},r.contentWindow.document.close(),r.focus()})});
