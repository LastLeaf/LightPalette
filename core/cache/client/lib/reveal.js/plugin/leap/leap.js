/*
 * Copyright (c) 2013, Leap Motion, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Version 0.2.0 - http://js.leapmotion.com/0.2.0/leap.min.js
 * Grab latest versions from http://js.leapmotion.com/
 */
!function(t,n,e){function r(e,o){if(!n[e]){if(!t[e]){var a="function"==typeof require&&require;if(!o&&a)return a(e,!0);if(i)return i(e,!0);throw new Error("Cannot find module '"+e+"'")}var s=n[e]={exports:{}};t[e][0].call(s.exports,function(n){var i=t[e][1][n];return r(i?i:n)},s,s.exports)}return n[e].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,n){var e=t("./protocol").chooseProtocol,r=t("events").EventEmitter,i=t("underscore"),o=n.exports=function(t){this.opts=i.defaults(t||{},{host:"127.0.0.1",enableGestures:!1,port:6437,enableHeartbeat:!0,heartbeatInterval:100,requestProtocolVersion:3}),this.host=t.host,this.port=t.port,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.opts.enableHeartbeat&&this.startHeartbeat()}),this.on("disconnect",function(){this.opts.enableHeartbeat&&this.stopHeartbeat()}),this.heartbeatTimer=null};o.prototype.getUrl=function(){return"ws://"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},o.prototype.sendHeartbeat=function(){this.protocol&&(this.setHeartbeatState(!0),this.protocol.sendHeartbeat(this))},o.prototype.handleOpen=function(){this.emit("connect")},o.prototype.enableGestures=function(t){this.gesturesEnabled=t?!0:!1,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},o.prototype.handleClose=function(){this.disconnect(),this.startReconnection()},o.prototype.startReconnection=function(){var t=this;setTimeout(function(){t.connect()},1e3)},o.prototype.disconnect=function(){this.socket&&(this.socket.close(),delete this.socket,delete this.protocol,this.emit("disconnect"))},o.prototype.handleData=function(t){var n,r=JSON.parse(t);void 0===this.protocol?(n=this.protocol=e(r),this.emit("ready")):n=this.protocol(r),this.emit(n.type,n)},o.prototype.connect=function(){return this.socket?void 0:(this.socket=this.setupSocket(),!0)},o.prototype.send=function(t){this.socket.send(t)},o.prototype.stopHeartbeat=function(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),delete this.heartbeatTimer,this.setHeartbeatState(!1))},o.prototype.setHeartbeatState=function(t){this.heartbeatState!==t&&(this.heartbeatState=t,this.emit(this.heartbeatState?"focus":"blur"))},i.extend(o.prototype,r.prototype)},{"./protocol":12,events:17,underscore:20}],2:[function(t,n){var e=n.exports=function(t){this.pos=0,this._buf=[],this.size=t};e.prototype.get=function(t){return void 0==t&&(t=0),t>=this.size?void 0:t>=this._buf.length?void 0:this._buf[(this.pos-t-1)%this.size]},e.prototype.push=function(t){return this._buf[this.pos%this.size]=t,this.pos++}},{}],3:[function(t,n){var e=n.exports=t("./base_connection");e.prototype.setupSocket=function(){var t=this,n=new WebSocket(this.getUrl());return n.onopen=function(){t.handleOpen()},n.onmessage=function(n){t.handleData(n.data)},n.onclose=function(){t.handleClose()},n},e.prototype.startHeartbeat=function(){if(this.protocol.sendHeartbeat&&!this.heartbeatTimer){var t=this,n=null;n="undefined"!=typeof document.hidden?"hidden":"undefined"!=typeof document.mozHidden?"mozHidden":"undefined"!=typeof document.msHidden?"msHidden":"undefined"!=typeof document.webkitHidden?"webkitHidden":void 0;var e=!0,r=window.addEventListener("focus",function(){e=!0}),i=window.addEventListener("blur",function(){e=!1});this.on("disconnect",function(){t.heartbeatTimer&&(clearTimeout(t.heartbeatTimer),delete t.heartbeatTimer),window.removeEventListener(r),window.removeEventListener(i)}),this.heartbeatTimer=setInterval(function(){var r=void 0===n?!0:document[n]===!1;r&&e?t.sendHeartbeat():t.setHeartbeatState(!1)},this.opts.heartbeatInterval)}}},{"./base_connection":1}],4:[function(t,n){!function(e){var r=t("./frame"),i=t("./circular_buffer"),o=t("./pipeline"),a=t("events").EventEmitter,s=t("./gesture").gestureListener,u=t("underscore"),c=n.exports=function(n){var o="undefined"!=typeof e&&"node"===e.title;n=u.defaults(n||{},{inNode:o}),this.inNode=n.inNode,n=u.defaults(n||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",supressAnimationLoop:!1}),this.supressAnimationLoop=n.supressAnimationLoop,this.frameEventName=n.frameEventName,this.history=new i(200),this.lastFrame=r.Invalid,this.lastValidFrame=r.Invalid,this.lastConnectionFrame=r.Invalid,this.accumulatedGestures=[],this.connectionType=void 0===n.connectionType?t(this.inBrowser()?"./connection":"./node_connection"):n.connectionType,this.connection=new this.connectionType(n),this.setupConnectionEvents()};c.prototype.gesture=function(t,n){var e=s(this,t);return void 0!==n&&e.stop(n),e},c.prototype.inBrowser=function(){return!this.inNode},c.prototype.useAnimationLoop=function(){return this.inBrowser()&&"undefined"==typeof chrome},c.prototype.connect=function(){var t=this;if(this.connection.connect()&&this.inBrowser()&&!t.supressAnimationLoop){var n=function(){t.emit("animationFrame",t.lastConnectionFrame),window.requestAnimFrame(n)};window.requestAnimFrame(n)}},c.prototype.disconnect=function(){this.connection.disconnect()},c.prototype.frame=function(t){return this.history.get(t)||r.Invalid},c.prototype.loop=function(t){switch(t.length){case 1:this.on(this.frameEventName,t);break;case 2:var n=this,e=function(r){t(r,function(){n.lastFrame!=r?e(n.lastFrame):n.once(n.frameEventName,e)})};this.once(this.frameEventName,e)}this.connect()},c.prototype.addStep=function(t){this.pipeline||(this.pipeline=new o(this)),this.pipeline.addStep(t)},c.prototype.processFrame=function(t){t.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(t.gestures)),this.pipeline&&(t=this.pipeline.run(t),t||(t=r.Invalid)),this.lastConnectionFrame=t,this.emit("deviceFrame",t)},c.prototype.processFinishedFrame=function(t){if(this.lastFrame=t,t.valid&&(this.lastValidFrame=t),t.controller=this,t.historyIdx=this.history.push(t),t.gestures){t.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var n=0;n!=t.gestures.length;n++)this.emit("gesture",t.gestures[n],t)}this.emit("frame",t)},c.prototype.setupConnectionEvents=function(){var t=this;this.connection.on("frame",function(n){t.processFrame(n)}),this.on(this.frameEventName,function(n){t.processFinishedFrame(n)}),this.connection.on("disconnect",function(){t.emit("disconnect")}),this.connection.on("ready",function(){t.emit("ready")}),this.connection.on("connect",function(){t.emit("connect")}),this.connection.on("focus",function(){t.emit("focus")}),this.connection.on("blur",function(){t.emit("blur")}),this.connection.on("protocol",function(n){t.emit("protocol",n)}),this.connection.on("deviceConnect",function(n){t.emit(n.state?"deviceConnected":"deviceDisconnected")})},u.extend(c.prototype,a.prototype)}(t("__browserify_process"))},{"./circular_buffer":2,"./connection":3,"./frame":5,"./gesture":6,"./node_connection":16,"./pipeline":10,__browserify_process:18,events:17,underscore:20}],5:[function(t,n){var e=t("./hand"),r=t("./pointable"),i=t("./gesture").createGesture,o=t("gl-matrix"),a=o.mat3,s=o.vec3,u=t("./interaction_box"),c=t("underscore"),l=n.exports=function(t){this.valid=!0,this.id=t.id,this.timestamp=t.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],t.interactionBox&&(this.interactionBox=new u(t.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=t.t,this._rotation=c.flatten(t.r),this._scaleFactor=t.s,this.data=t,this.type="frame",this.currentFrameRate=t.currentFrameRate;for(var n={},o=0,a=t.hands.length;o!=a;o++){var s=new e(t.hands[o]);s.frame=this,this.hands.push(s),this.handsMap[s.id]=s,n[s.id]=o}for(var l=0,f=t.pointables.length;l!=f;l++){var h=new r(t.pointables[l]);if(h.frame=this,this.pointables.push(h),this.pointablesMap[h.id]=h,(h.tool?this.tools:this.fingers).push(h),void 0!==h.handId&&n.hasOwnProperty(h.handId)){var s=this.hands[n[h.handId]];s.pointables.push(h),(h.tool?s.tools:s.fingers).push(h)}}if(t.gestures)for(var p=0,d=t.gestures.length;p!=d;p++)this.gestures.push(i(t.gestures[p]))};l.prototype.tool=function(t){var n=this.pointable(t);return n.tool?n:r.Invalid},l.prototype.pointable=function(t){return this.pointablesMap[t]||r.Invalid},l.prototype.finger=function(t){var n=this.pointable(t);return n.tool?r.Invalid:n},l.prototype.hand=function(t){return this.handsMap[t]||e.Invalid},l.prototype.rotationAngle=function(t,n){if(!this.valid||!t.valid)return 0;var e=this.rotationMatrix(t),r=.5*(e[0]+e[4]+e[8]-1),i=Math.acos(r);if(i=isNaN(i)?0:i,void 0!==n){var o=this.rotationAxis(t);i*=s.dot(o,s.normalize(s.create(),n))}return i},l.prototype.rotationAxis=function(t){return this.valid&&t.valid?s.normalize(s.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):s.create()},l.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return a.create();var n=a.transpose(a.create(),this._rotation);return a.multiply(a.create(),t._rotation,n)},l.prototype.scaleFactor=function(t){return this.valid&&t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},l.prototype.translation=function(t){return this.valid&&t.valid?s.subtract(s.create(),this._translation,t._translation):s.create()},l.prototype.toString=function(){var t="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(t+=" | Gesture count:("+this.gestures.length+")"),t+=" ]"},l.prototype.dump=function(){var t="";t+="Frame Info:<br/>",t+=this.toString(),t+="<br/><br/>Hands:<br/>";for(var n=0,e=this.hands.length;n!=e;n++)t+="  "+this.hands[n].toString()+"<br/>";t+="<br/><br/>Pointables:<br/>";for(var r=0,i=this.pointables.length;r!=i;r++)t+="  "+this.pointables[r].toString()+"<br/>";if(this.gestures){t+="<br/><br/>Gestures:<br/>";for(var o=0,a=this.gestures.length;o!=a;o++)t+="  "+this.gestures[o].toString()+"<br/>"}return t+="<br/><br/>Raw JSON:<br/>",t+=JSON.stringify(this.data)},l.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return r.Invalid},finger:function(){return r.Invalid},hand:function(){return e.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return s.create()},scaleFactor:function(){return 1},translation:function(){return s.create()}}},{"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"gl-matrix":19,underscore:20}],6:[function(t,n,e){var r=t("gl-matrix"),i=(r.vec3,t("events").EventEmitter),o=t("underscore"),a=(e.createGesture=function(t){var n;switch(t.type){case"circle":n=new s(t);break;case"swipe":n=new u(t);break;case"screenTap":n=new c(t);break;case"keyTap":n=new l(t);break;default:throw"unkown gesture type"}return n.id=t.id,n.handIds=t.handIds,n.pointableIds=t.pointableIds,n.duration=t.duration,n.state=t.state,n.type=t.type,n},e.gestureListener=function(t,n){var e={},r={};t.on("gesture",function(t,i){if(t.type==n){if(("start"==t.state||"stop"==t.state)&&void 0===r[t.id]){var s=new a(t,i);r[t.id]=s,o.each(e,function(t,n){s.on(n,t)})}r[t.id].update(t,i),"stop"==t.state&&delete r[t.id]}});var i={start:function(t){return e.start=t,i},stop:function(t){return e.stop=t,i},complete:function(t){return e.stop=t,i},update:function(t){return e.update=t,i}};return i},e.Gesture=function(t,n){this.gestures=[t],this.frames=[n]});a.prototype.update=function(t,n){this.gestures.push(t),this.frames.push(n),this.emit(t.state,this)},o.extend(a.prototype,i.prototype);var s=function(t){this.center=t.center,this.normal=t.normal,this.progress=t.progress,this.radius=t.radius};s.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var u=function(t){this.startPosition=t.startPosition,this.position=t.position,this.direction=t.direction,this.speed=t.speed};u.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var c=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};c.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var l=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};l.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:17,"gl-matrix":19,underscore:20}],7:[function(t,n){var e=t("./pointable"),r=t("gl-matrix"),i=r.mat3,o=r.vec3,a=t("underscore"),s=n.exports=function(t){this.id=t.id,this.palmPosition=t.palmPosition,this.direction=t.direction,this.palmVelocity=t.palmVelocity,this.palmNormal=t.palmNormal,this.sphereCenter=t.sphereCenter,this.sphereRadius=t.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],this.tools=[],this._translation=t.t,this._rotation=a.flatten(t.r),this._scaleFactor=t.s,this.timeVisible=t.timeVisible,this.stabilizedPalmPosition=t.stabilizedPalmPosition};s.prototype.finger=function(t){var n=this.frame.finger(t);return n&&n.handId==this.id?n:e.Invalid},s.prototype.rotationAngle=function(t,n){if(!this.valid||!t.valid)return 0;var e=t.hand(this.id);if(!e.valid)return 0;var r=this.rotationMatrix(t),i=.5*(r[0]+r[4]+r[8]-1),a=Math.acos(i);if(a=isNaN(a)?0:a,void 0!==n){var s=this.rotationAxis(t);a*=o.dot(s,o.normalize(o.create(),n))}return a},s.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return o.create();var n=t.hand(this.id);return n.valid?o.normalize(o.create(),[this._rotation[7]-n._rotation[5],this._rotation[2]-n._rotation[6],this._rotation[3]-n._rotation[1]]):o.create()},s.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return i.create();var n=t.hand(this.id);if(!n.valid)return i.create();var e=i.transpose(i.create(),this._rotation),r=i.multiply(i.create(),n._rotation,e);return r},s.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;var n=t.hand(this.id);return n.valid?Math.exp(this._scaleFactor-n._scaleFactor):1},s.prototype.translation=function(t){if(!this.valid||!t.valid)return o.create();var n=t.hand(this.id);return n.valid?[this._translation[0]-n._translation[0],this._translation[1]-n._translation[1],this._translation[2]-n._translation[2]]:o.create()},s.prototype.toString=function(){return"Hand [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},s.Invalid={valid:!1,fingers:[],tools:[],pointables:[],pointable:function(){return e.Invalid},finger:function(){return e.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return i.create()},rotationAxis:function(){return o.create()},scaleFactor:function(){return 1},translation:function(){return o.create()}}},{"./pointable":11,"gl-matrix":19,underscore:20}],8:[function(t,n){!function(){n.exports={Controller:t("./controller"),Frame:t("./frame"),Gesture:t("./gesture"),Hand:t("./hand"),Pointable:t("./pointable"),InteractionBox:t("./interaction_box"),Connection:t("./connection"),CircularBuffer:t("./circular_buffer"),UI:t("./ui"),glMatrix:t("gl-matrix"),mat3:t("gl-matrix").mat3,vec3:t("gl-matrix").vec3,loopController:void 0,loop:function(t,n){void 0===n&&(n=t,t={}),this.loopController||(this.loopController=new this.Controller(t)),this.loopController.loop(n)}}}()},{"./circular_buffer":2,"./connection":3,"./controller":4,"./frame":5,"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"./ui":13,"gl-matrix":19}],9:[function(t,n){var e=t("gl-matrix"),r=e.vec3,i=n.exports=function(t){this.valid=!0,this.center=t.center,this.size=t.size,this.width=t.size[0],this.height=t.size[1],this.depth=t.size[2]};i.prototype.denormalizePoint=function(t){return r.fromValues((t[0]-.5)*this.size[0]+this.center[0],(t[1]-.5)*this.size[1]+this.center[1],(t[2]-.5)*this.size[2]+this.center[2])},i.prototype.normalizePoint=function(t,n){var e=r.fromValues((t[0]-this.center[0])/this.size[0]+.5,(t[1]-this.center[1])/this.size[1]+.5,(t[2]-this.center[2])/this.size[2]+.5);return n&&(e[0]=Math.min(Math.max(e[0],0),1),e[1]=Math.min(Math.max(e[1],0),1),e[2]=Math.min(Math.max(e[2],0),1)),e},i.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},i.Invalid={valid:!1}},{"gl-matrix":19}],10:[function(t,n){var e=n.exports=function(){this.steps=[]};e.prototype.addStep=function(t){this.steps.push(t)},e.prototype.run=function(t){for(var n=this.steps.length,e=0;e!=n&&t;e++)t=this.steps[e](t);return t}},{}],11:[function(t,n){var e=t("gl-matrix"),r=(e.vec3,n.exports=function(t){this.valid=!0,this.id=t.id,this.handId=t.handId,this.length=t.length,this.tool=t.tool,this.width=t.width,this.direction=t.direction,this.stabilizedTipPosition=t.stabilizedTipPosition,this.tipPosition=t.tipPosition,this.tipVelocity=t.tipVelocity,this.touchZone=t.touchZone,this.touchDistance=t.touchDistance,this.timeVisible=t.timeVisible});r.prototype.toString=function(){return 1==this.tool?"Pointable [ id:"+this.id+" "+this.length+"mmx | with:"+this.width+"mm | direction:"+this.direction+" ]":"Pointable [ id:"+this.id+" "+this.length+"mmx | direction: "+this.direction+" ]"},r.Invalid={valid:!1}},{"gl-matrix":19}],12:[function(t,n,e){var r=t("./frame"),i=function(t){this.type=t.type,this.state=t.state},o=(e.chooseProtocol=function(t){var n;switch(t.version){case 1:n=o(1,function(t){return new r(t)});break;case 2:n=o(2,function(t){return new r(t)}),n.sendHeartbeat=function(t){t.send(n.encode({heartbeat:!0}))};break;case 3:n=o(3,function(t){return t.event?new i(t.event):new r(t)}),n.sendHeartbeat=function(t){t.send(n.encode({heartbeat:!0}))};break;default:throw"unrecognized version"}return n},function(t,n){var e=n;return e.encode=function(t){return JSON.stringify(t)},e.version=t,e.versionLong="Version "+t,e.type="protocol",e})},{"./frame":5}],13:[function(t,n,e){e.UI={Region:t("./ui/region"),Cursor:t("./ui/cursor")}},{"./ui/cursor":14,"./ui/region":15}],14:[function(t,n){n.exports=function(){return function(t){var n=t.pointables.sort(function(t,n){return t.z-n.z})[0];return n&&n.valid&&(t.cursorPosition=n.tipPosition),t}}},{}],15:[function(t,n){var e=t("events").EventEmitter,r=t("underscore"),i=n.exports=function(t,n){this.start=new Vector(t),this.end=new Vector(n),this.enteredFrame=null};i.prototype.hasPointables=function(t){for(var n=0;n!=t.pointables.length;n++){var e=t.pointables[n].tipPosition;if(e.x>=this.start.x&&e.x<=this.end.x&&e.y>=this.start.y&&e.y<=this.end.y&&e.z>=this.start.z&&e.z<=this.end.z)return!0}return!1},i.prototype.listener=function(t){var n=this;return t&&t.nearThreshold&&this.setupNearRegion(t.nearThreshold),function(t){return n.updatePosition(t)}},i.prototype.clipper=function(){var t=this;return function(n){return t.updatePosition(n),t.enteredFrame?n:null}},i.prototype.setupNearRegion=function(t){var n=this.nearRegion=new i([this.start.x-t,this.start.y-t,this.start.z-t],[this.end.x+t,this.end.y+t,this.end.z+t]),e=this;n.on("enter",function(t){e.emit("near",t)}),n.on("exit",function(t){e.emit("far",t)}),e.on("exit",function(t){e.emit("near",t)})},i.prototype.updatePosition=function(t){return this.nearRegion&&this.nearRegion.updatePosition(t),this.hasPointables(t)&&null==this.enteredFrame?(this.enteredFrame=t,this.emit("enter",this.enteredFrame)):this.hasPointables(t)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),t},i.prototype.normalize=function(t){return new Vector([(t.x-this.start.x)/(this.end.x-this.start.x),(t.y-this.start.y)/(this.end.y-this.start.y),(t.z-this.start.z)/(this.end.z-this.start.z)])},i.prototype.mapToXY=function(t,n,e){var r=this.normalize(t),i=r.x,o=r.y;return i>1?i=1:-1>i&&(i=-1),o>1?o=1:-1>o&&(o=-1),[(i+1)/2*n,(1-o)/2*e,r.z]},r.extend(i.prototype,e.prototype)},{events:17,underscore:20}],16:[function(){},{}],17:[function(t,n,e){!function(t){function n(t,n){if(t.indexOf)return t.indexOf(n);for(var e=0;e<t.length;e++)if(n===t[e])return e;return-1}t.EventEmitter||(t.EventEmitter=function(){});var r=e.EventEmitter=t.EventEmitter,i="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=10;r.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},r.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||i(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var n=this._events[t];if(!n)return!1;if("function"==typeof n){switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:var e=Array.prototype.slice.call(arguments,1);n.apply(this,e)}return!0}if(i(n)){for(var e=Array.prototype.slice.call(arguments,1),r=n.slice(),o=0,a=r.length;a>o;o++)r[o].apply(this,e);return!0}return!1},r.prototype.addListener=function(t,n){if("function"!=typeof n)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,n),this._events[t])if(i(this._events[t])){if(!this._events[t].warned){var e;e=void 0!==this._events.maxListeners?this._events.maxListeners:o,e&&e>0&&this._events[t].length>e&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(n)}else this._events[t]=[this._events[t],n];else this._events[t]=n;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,n){var e=this;return e.on(t,function r(){e.removeListener(t,r),n.apply(this,arguments)}),this},r.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var r=this._events[t];if(i(r)){var o=n(r,e);if(0>o)return this;r.splice(o,1),0==r.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),i(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}}(t("__browserify_process"))},{__browserify_process:18}],18:[function(t,n){var e=n.exports={};e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(n){var e=[];return window.addEventListener("message",function(t){if(t.source===window&&"process-tick"===t.data&&(t.stopPropagation(),e.length>0)){var n=e.shift();n()}},!0),function(t){e.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")}},{}],19:[function(t,n,e){!function(){!function(){"use strict";var t={};"undefined"==typeof e?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.exports={},define(function(){return t.exports})):t.exports=window:t.exports=e,!function(t){var n={};if(!e)var e=1e-6;n.create=function(){return new Float32Array(2)},n.clone=function(t){var n=new Float32Array(2);return n[0]=t[0],n[1]=t[1],n},n.fromValues=function(t,n){var e=new Float32Array(2);return e[0]=t,e[1]=n,e},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},n.set=function(t,n,e){return t[0]=n,t[1]=e,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},n.sub=n.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t},n.mul=n.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t},n.div=n.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},n.dist=n.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)},n.sqrDist=n.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r},n.len=n.length=function(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)},n.sqrLen=n.squaredLength=function(t){var n=t[0],e=t[1];return n*n+e*e},n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},n.normalize=function(t,n){var e=n[0],r=n[1],i=e*e+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i),t},n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},n.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},n.lerp=function(t,n,e,r){var i=n[0],o=n[1];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t},n.transformMat2=function(t,n,e){var r=n[0],i=n[1];return t[0]=r*e[0]+i*e[1],t[1]=r*e[2]+i*e[3],t},n.forEach=function(){var t=new Float32Array(2);return function(n,e,r,i,o,a){var s,u;for(e||(e=2),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;u>s;s+=e)t[0]=n[s],t[1]=n[s+1],o(t,t,a),n[s]=t[0],n[s+1]=t[1];return n}}(),n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=n);var r={};if(!e)var e=1e-6;r.create=function(){return new Float32Array(3)},r.clone=function(t){var n=new Float32Array(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},r.fromValues=function(t,n,e){var r=new Float32Array(3);return r[0]=t,r[1]=n,r[2]=e,r},r.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},r.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},r.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},r.sub=r.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t},r.mul=r.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t},r.div=r.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t},r.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},r.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},r.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},r.dist=r.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(e*e+r*r+i*i)},r.sqrDist=r.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return e*e+r*r+i*i},r.len=r.length=function(t){var n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)},r.sqrLen=r.squaredLength=function(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r},r.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},r.normalize=function(t,n){var e=n[0],r=n[1],i=n[2],o=e*e+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t},r.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},r.cross=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},r.lerp=function(t,n,e,r){var i=n[0],o=n[1],a=n[2];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=a+r*(e[2]-a),t},r.transformMat4=function(t,n,e){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r+e[4]*i+e[8]*o+e[12],t[1]=e[1]*r+e[5]*i+e[9]*o+e[13],t[2]=e[2]*r+e[6]*i+e[10]*o+e[14],t},r.transformQuat=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2],c=e[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t},r.forEach=function(){var t=new Float32Array(3);return function(n,e,r,i,o,a){var s,u;for(e||(e=3),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;u>s;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],o(t,t,a),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2];return n}}(),r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=r);var i={};if(!e)var e=1e-6;i.create=function(){return new Float32Array(4)},i.clone=function(t){var n=new Float32Array(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},i.fromValues=function(t,n,e,r){var i=new Float32Array(4);return i[0]=t,i[1]=n,i[2]=e,i[3]=r,i},i.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},i.set=function(t,n,e,r,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t},i.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},i.sub=i.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t},i.mul=i.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t},i.div=i.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t},i.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},i.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},i.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},i.dist=i.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+i*i+o*o)},i.sqrDist=i.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+i*i+o*o},i.len=i.length=function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return Math.sqrt(n*n+e*e+r*r+i*i)},i.sqrLen=i.squaredLength=function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return n*n+e*e+r*r+i*i},i.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},i.normalize=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*e+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a),t},i.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},i.lerp=function(t,n,e,r){var i=n[0],o=n[1],a=n[2],s=n[3];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=a+r*(e[2]-a),t[3]=s+r*(e[3]-s),t},i.transformMat4=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3];return t[0]=e[0]*r+e[4]*i+e[8]*o+e[12]*a,t[1]=e[1]*r+e[5]*i+e[9]*o+e[13]*a,t[2]=e[2]*r+e[6]*i+e[10]*o+e[14]*a,t[3]=e[3]*r+e[7]*i+e[11]*o+e[15]*a,t},i.transformQuat=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2],c=e[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t},i.forEach=function(){var t=new Float32Array(4);return function(n,e,r,i,o,a){var s,u;for(e||(e=4),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;u>s;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],t[3]=n[s+3],o(t,t,a),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2],n[s+3]=t[3];return n}}(),i.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=i);var o={},a=new Float32Array([1,0,0,1]);if(!e)var e=1e-6;o.create=function(){return new Float32Array(a)},o.clone=function(t){var n=new Float32Array(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},o.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.transpose=function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},o.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=e*a,t):null},o.adjoint=function(t,n){var e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},o.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},o.mul=o.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=r*s+i*c,t[1]=r*u+i*l,t[2]=o*s+a*c,t[3]=o*u+a*l,t},o.rotate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+i*s,t[1]=r*-s+i*u,t[2]=o*u+a*s,t[3]=o*-s+a*u,t},o.scale=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1];return t[0]=r*s,t[1]=i*u,t[2]=o*s,t[3]=a*u,t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"
},"undefined"!=typeof t&&(t.mat2=o);var s={},u=new Float32Array([1,0,0,0,1,0,0,0,1]);if(!e)var e=1e-6;s.create=function(){return new Float32Array(u)},s.clone=function(t){var n=new Float32Array(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},s.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},s.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},s.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},s.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=l*a-s*c,h=-l*o+s*u,p=c*o-a*u,d=e*f+r*h+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-l*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=h*d,t[4]=(l*e-i*u)*d,t[5]=(-s*e+i*o)*d,t[6]=p*d,t[7]=(-c*e+r*u)*d,t[8]=(a*e-r*o)*d,t):null},s.adjoint=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8];return t[0]=a*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*a,t[3]=s*u-o*l,t[4]=e*l-i*u,t[5]=i*o-e*s,t[6]=o*c-a*u,t[7]=r*u-e*c,t[8]=e*a-r*o,t},s.determinant=function(t){var n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return n*(c*o-a*u)+e*(-c*i+a*s)+r*(u*i-o*s)},s.mul=s.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=e[0],p=e[1],d=e[2],v=e[3],m=e[4],y=e[5],g=e[6],b=e[7],w=e[8];return t[0]=h*r+p*a+d*c,t[1]=h*i+p*s+d*l,t[2]=h*o+p*u+d*f,t[3]=v*r+m*a+y*c,t[4]=v*i+m*s+y*l,t[5]=v*o+m*u+y*f,t[6]=g*r+b*a+w*c,t[7]=g*i+b*s+w*l,t[8]=g*o+b*u+w*f,t},s.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},"undefined"!=typeof t&&(t.mat3=s);var c={},l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(!e)var e=1e-6;c.create=function(){return new Float32Array(l)},c.clone=function(t){var n=new Float32Array(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},c.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},c.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],i=n[3],o=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},c.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=n[9],h=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15],g=e*s-r*a,b=e*u-i*a,w=e*c-o*a,x=r*u-i*s,_=r*c-o*s,M=i*c-o*u,F=l*v-f*d,A=l*m-h*d,E=l*y-p*d,S=f*m-h*v,z=f*y-p*v,q=h*y-p*m,I=g*q-b*z+w*S+x*E-_*A+M*F;return I?(I=1/I,t[0]=(s*q-u*z+c*S)*I,t[1]=(i*z-r*q-o*S)*I,t[2]=(v*M-m*_+y*x)*I,t[3]=(h*_-f*M-p*x)*I,t[4]=(u*E-a*q-c*A)*I,t[5]=(e*q-i*E+o*A)*I,t[6]=(m*w-d*M-y*b)*I,t[7]=(l*M-h*w+p*b)*I,t[8]=(a*z-s*E+c*F)*I,t[9]=(r*E-e*z-o*F)*I,t[10]=(d*_-v*w+y*g)*I,t[11]=(f*w-l*_-p*g)*I,t[12]=(s*A-a*S-u*F)*I,t[13]=(e*S-r*A+i*F)*I,t[14]=(v*b-d*x-m*g)*I,t[15]=(l*x-f*b+h*g)*I,t):null},c.adjoint=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=n[9],h=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15];return t[0]=s*(h*y-p*m)-f*(u*y-c*m)+v*(u*p-c*h),t[1]=-(r*(h*y-p*m)-f*(i*y-o*m)+v*(i*p-o*h)),t[2]=r*(u*y-c*m)-s*(i*y-o*m)+v*(i*c-o*u),t[3]=-(r*(u*p-c*h)-s*(i*p-o*h)+f*(i*c-o*u)),t[4]=-(a*(h*y-p*m)-l*(u*y-c*m)+d*(u*p-c*h)),t[5]=e*(h*y-p*m)-l*(i*y-o*m)+d*(i*p-o*h),t[6]=-(e*(u*y-c*m)-a*(i*y-o*m)+d*(i*c-o*u)),t[7]=e*(u*p-c*h)-a*(i*p-o*h)+l*(i*c-o*u),t[8]=a*(f*y-p*v)-l*(s*y-c*v)+d*(s*p-c*f),t[9]=-(e*(f*y-p*v)-l*(r*y-o*v)+d*(r*p-o*f)),t[10]=e*(s*y-c*v)-a*(r*y-o*v)+d*(r*c-o*s),t[11]=-(e*(s*p-c*f)-a*(r*p-o*f)+l*(r*c-o*s)),t[12]=-(a*(f*m-h*v)-l*(s*m-u*v)+d*(s*h-u*f)),t[13]=e*(f*m-h*v)-l*(r*m-i*v)+d*(r*h-i*f),t[14]=-(e*(s*m-u*v)-a*(r*m-i*v)+d*(r*u-i*s)),t[15]=e*(s*h-u*f)-a*(r*h-i*f)+l*(r*u-i*s),t},c.determinant=function(t){var n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],m=t[15],y=n*a-e*o,g=n*s-r*o,b=n*u-i*o,w=e*s-r*a,x=e*u-i*a,_=r*u-i*s,M=c*d-l*p,F=c*v-f*p,A=c*m-h*p,E=l*v-f*d,S=l*m-h*d,z=f*m-h*v;return y*z-g*S+b*E+w*A-x*F+_*M},c.mul=c.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=n[9],p=n[10],d=n[11],v=n[12],m=n[13],y=n[14],g=n[15],b=e[0],w=e[1],x=e[2],_=e[3];return t[0]=b*r+w*s+x*f+_*v,t[1]=b*i+w*u+x*h+_*m,t[2]=b*o+w*c+x*p+_*y,t[3]=b*a+w*l+x*d+_*g,b=e[4],w=e[5],x=e[6],_=e[7],t[4]=b*r+w*s+x*f+_*v,t[5]=b*i+w*u+x*h+_*m,t[6]=b*o+w*c+x*p+_*y,t[7]=b*a+w*l+x*d+_*g,b=e[8],w=e[9],x=e[10],_=e[11],t[8]=b*r+w*s+x*f+_*v,t[9]=b*i+w*u+x*h+_*m,t[10]=b*o+w*c+x*p+_*y,t[11]=b*a+w*l+x*d+_*g,b=e[12],w=e[13],x=e[14],_=e[15],t[12]=b*r+w*s+x*f+_*v,t[13]=b*i+w*u+x*h+_*m,t[14]=b*o+w*c+x*p+_*y,t[15]=b*a+w*l+x*d+_*g,t},c.translate=function(t,n,e){var r,i,o,a,s,u,c,l,f,h,p,d,v=e[0],m=e[1],y=e[2];return n===t?(t[12]=n[0]*v+n[4]*m+n[8]*y+n[12],t[13]=n[1]*v+n[5]*m+n[9]*y+n[13],t[14]=n[2]*v+n[6]*m+n[10]*y+n[14],t[15]=n[3]*v+n[7]*m+n[11]*y+n[15]):(r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=n[9],p=n[10],d=n[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+s*m+f*y+n[12],t[13]=i*v+u*m+h*y+n[13],t[14]=o*v+c*m+p*y+n[14],t[15]=a*v+l*m+d*y+n[15]),t},c.scale=function(t,n,e){var r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},c.rotate=function(t,n,r,i){var o,a,s,u,c,l,f,h,p,d,v,m,y,g,b,w,x,_,M,F,A,E,S,z,q=i[0],I=i[1],k=i[2],T=Math.sqrt(q*q+I*I+k*k);return Math.abs(T)<e?null:(T=1/T,q*=T,I*=T,k*=T,o=Math.sin(r),a=Math.cos(r),s=1-a,u=n[0],c=n[1],l=n[2],f=n[3],h=n[4],p=n[5],d=n[6],v=n[7],m=n[8],y=n[9],g=n[10],b=n[11],w=q*q*s+a,x=I*q*s+k*o,_=k*q*s-I*o,M=q*I*s-k*o,F=I*I*s+a,A=k*I*s+q*o,E=q*k*s+I*o,S=I*k*s-q*o,z=k*k*s+a,t[0]=u*w+h*x+m*_,t[1]=c*w+p*x+y*_,t[2]=l*w+d*x+g*_,t[3]=f*w+v*x+b*_,t[4]=u*M+h*F+m*A,t[5]=c*M+p*F+y*A,t[6]=l*M+d*F+g*A,t[7]=f*M+v*F+b*A,t[8]=u*E+h*S+m*z,t[9]=c*E+p*S+y*z,t[10]=l*E+d*S+g*z,t[11]=f*E+v*S+b*z,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},c.rotateX=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[4],a=n[5],s=n[6],u=n[7],c=n[8],l=n[9],f=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t},c.rotateY=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[8],l=n[9],f=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t},c.rotateZ=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[4],l=n[5],f=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t},c.fromRotationTranslation=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,h=r*c,p=i*u,d=i*c,v=o*c,m=a*s,y=a*u,g=a*c;return t[0]=1-(p+v),t[1]=f+g,t[2]=h-y,t[3]=0,t[4]=f-g,t[5]=1-(l+v),t[6]=d+m,t[7]=0,t[8]=h+y,t[9]=d-m,t[10]=1-(l+p),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},c.frustum=function(t,n,e,r,i,o,a){var s=1/(e-n),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(e+n)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},c.perspective=function(t,n,e,r,i){var o=1/Math.tan(n/2),a=1/(r-i);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},c.ortho=function(t,n,e,r,i,o,a){var s=1/(n-e),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},c.lookAt=function(t,n,r,i){var o,a,s,u,l,f,h,p,d,v,m=n[0],y=n[1],g=n[2],b=i[0],w=i[1],x=i[2],_=r[0],M=r[1],F=r[2];return Math.abs(m-_)<e&&Math.abs(y-M)<e&&Math.abs(g-F)<e?c.identity(t):(h=m-_,p=y-M,d=g-F,v=1/Math.sqrt(h*h+p*p+d*d),h*=v,p*=v,d*=v,o=w*d-x*p,a=x*h-b*d,s=b*p-w*h,v=Math.sqrt(o*o+a*a+s*s),v?(v=1/v,o*=v,a*=v,s*=v):(o=0,a=0,s=0),u=p*s-d*a,l=d*o-h*s,f=h*a-p*o,v=Math.sqrt(u*u+l*l+f*f),v?(v=1/v,u*=v,l*=v,f*=v):(u=0,l=0,f=0),t[0]=o,t[1]=u,t[2]=h,t[3]=0,t[4]=a,t[5]=l,t[6]=p,t[7]=0,t[8]=s,t[9]=f,t[10]=d,t[11]=0,t[12]=-(o*m+a*y+s*g),t[13]=-(u*m+l*y+f*g),t[14]=-(h*m+p*y+d*g),t[15]=1,t)},c.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},"undefined"!=typeof t&&(t.mat4=c);var f={},h=new Float32Array([0,0,0,1]);if(!e)var e=1e-6;f.create=function(){return new Float32Array(h)},f.clone=i.clone,f.fromValues=i.fromValues,f.copy=i.copy,f.set=i.set,f.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},f.setAxisAngle=function(t,n,e){e=.5*e;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t},f.add=i.add,f.mul=f.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t},f.scale=i.scale,f.rotateX=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},f.rotateY=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},f.rotateZ=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},f.calculateW=function(t,n){var e=n[0],r=n[1],i=n[2];return t[0]=e,t[1]=r,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-e*e-r*r-i*i)),t},f.dot=i.dot,f.lerp=i.lerp,f.slerp=function(t,n,e,r){var i,o,a,s,u=n[0],c=n[1],l=n[2],f=n[3],h=e[0],p=e[1],d=e[2],v=n[3],m=u*h+c*p+l*d+f*v;return Math.abs(m)>=1?(t!==n&&(t[0]=u,t[1]=c,t[2]=l,t[3]=f),t):(i=Math.acos(m),o=Math.sqrt(1-m*m),Math.abs(o)<.001?(t[0]=.5*u+.5*h,t[1]=.5*c+.5*p,t[2]=.5*l+.5*d,t[3]=.5*f+.5*v,t):(a=Math.sin((1-r)*i)/o,s=Math.sin(r*i)/o,t[0]=u*a+h*s,t[1]=c*a+p*s,t[2]=l*a+d*s,t[3]=f*a+v*s,t))},f.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*e+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-e*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},f.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},f.len=f.length=i.length,f.sqrLen=f.squaredLength=i.squaredLength,f.normalize=i.normalize,f.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=f)}(t.exports)}()}()},{}],20:[function(t,n,e){!function(){!function(){var t=this,r=t._,i={},o=Array.prototype,a=Object.prototype,s=Function.prototype,u=o.push,c=o.slice,l=o.concat,f=a.toString,h=a.hasOwnProperty,p=o.forEach,d=o.map,v=o.reduce,m=o.reduceRight,y=o.filter,g=o.every,b=o.some,w=o.indexOf,x=o.lastIndexOf,_=Array.isArray,M=Object.keys,F=s.bind,A=function(t){return t instanceof A?t:this instanceof A?void(this._wrapped=t):new A(t)};"undefined"!=typeof e?("undefined"!=typeof n&&n.exports&&(e=n.exports=A),e._=A):t._=A,A.VERSION="1.4.4";var E=A.each=A.forEach=function(t,n,e){if(null!=t)if(p&&t.forEach===p)t.forEach(n,e);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(n.call(e,t[r],r,t)===i)return}else for(var a in t)if(A.has(t,a)&&n.call(e,t[a],a,t)===i)return};A.map=A.collect=function(t,n,e){var r=[];return null==t?r:d&&t.map===d?t.map(n,e):(E(t,function(t,i,o){r[r.length]=n.call(e,t,i,o)}),r)};var S="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),v&&t.reduce===v)return r&&(n=A.bind(n,r)),i?t.reduce(n,e):t.reduce(n);if(E(t,function(t,o,a){i?e=n.call(r,e,t,o,a):(e=t,i=!0)}),!i)throw new TypeError(S);return e},A.reduceRight=A.foldr=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return r&&(n=A.bind(n,r)),i?t.reduceRight(n,e):t.reduceRight(n);var o=t.length;if(o!==+o){var a=A.keys(t);o=a.length}if(E(t,function(s,u,c){u=a?a[--o]:--o,i?e=n.call(r,e,t[u],u,c):(e=t[u],i=!0)}),!i)throw new TypeError(S);return e},A.find=A.detect=function(t,n,e){var r;return z(t,function(t,i,o){return n.call(e,t,i,o)?(r=t,!0):void 0}),r},A.filter=A.select=function(t,n,e){var r=[];return null==t?r:y&&t.filter===y?t.filter(n,e):(E(t,function(t,i,o){n.call(e,t,i,o)&&(r[r.length]=t)}),r)},A.reject=function(t,n,e){return A.filter(t,function(t,r,i){return!n.call(e,t,r,i)},e)},A.every=A.all=function(t,n,e){n||(n=A.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(n,e):(E(t,function(t,o,a){return(r=r&&n.call(e,t,o,a))?void 0:i}),!!r)};var z=A.some=A.any=function(t,n,e){n||(n=A.identity);var r=!1;return null==t?r:b&&t.some===b?t.some(n,e):(E(t,function(t,o,a){return r||(r=n.call(e,t,o,a))?i:void 0}),!!r)};A.contains=A.include=function(t,n){return null==t?!1:w&&t.indexOf===w?-1!=t.indexOf(n):z(t,function(t){return t===n})},A.invoke=function(t,n){var e=c.call(arguments,2),r=A.isFunction(n);return A.map(t,function(t){return(r?n:t[n]).apply(t,e)})},A.pluck=function(t,n){return A.map(t,function(t){return t[n]})},A.where=function(t,n,e){return A.isEmpty(n)?e?null:[]:A[e?"find":"filter"](t,function(t){for(var e in n)if(n[e]!==t[e])return!1;return!0})},A.findWhere=function(t,n){return A.where(t,n,!0)},A.max=function(t,n,e){if(!n&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!n&&A.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return E(t,function(t,i,o){var a=n?n.call(e,t,i,o):t;a>=r.computed&&(r={value:t,computed:a})}),r.value},A.min=function(t,n,e){if(!n&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!n&&A.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return E(t,function(t,i,o){var a=n?n.call(e,t,i,o):t;a<r.computed&&(r={value:t,computed:a})}),r.value},A.shuffle=function(t){var n,e=0,r=[];return E(t,function(t){n=A.random(e++),r[e-1]=r[n],r[n]=t}),r};var q=function(t){return A.isFunction(t)?t:function(n){return n[t]}};A.sortBy=function(t,n,e){var r=q(n);return A.pluck(A.map(t,function(t,n,i){return{value:t,index:n,criteria:r.call(e,t,n,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index<n.index?-1:1}),"value")};var I=function(t,n,e,r){var i={},o=q(n||A.identity);return E(t,function(n,a){var s=o.call(e,n,a,t);r(i,s,n)}),i};A.groupBy=function(t,n,e){return I(t,n,e,function(t,n,e){(A.has(t,n)?t[n]:t[n]=[]).push(e)})},A.countBy=function(t,n,e){return I(t,n,e,function(t,n){A.has(t,n)||(t[n]=0),t[n]++})},A.sortedIndex=function(t,n,e,r){e=null==e?A.identity:q(e);for(var i=e.call(r,n),o=0,a=t.length;a>o;){var s=o+a>>>1;e.call(r,t[s])<i?o=s+1:a=s}return o},A.toArray=function(t){return t?A.isArray(t)?c.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:c.call(t,0,n)},A.initial=function(t,n,e){return c.call(t,0,t.length-(null==n||e?1:n))},A.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:c.call(t,Math.max(t.length-n,0))},A.rest=A.tail=A.drop=function(t,n,e){return c.call(t,null==n||e?1:n)},A.compact=function(t){return A.filter(t,A.identity)};var k=function(t,n,e){return E(t,function(t){A.isArray(t)?n?u.apply(e,t):k(t,n,e):e.push(t)}),e};A.flatten=function(t,n){return k(t,n,[])},A.without=function(t){return A.difference(t,c.call(arguments,1))},A.uniq=A.unique=function(t,n,e,r){A.isFunction(n)&&(r=e,e=n,n=!1);var i=e?A.map(t,e,r):t,o=[],a=[];return E(i,function(e,r){(n?r&&a[a.length-1]===e:A.contains(a,e))||(a.push(e),o.push(t[r]))}),o},A.union=function(){return A.uniq(l.apply(o,arguments))},A.intersection=function(t){var n=c.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(n,function(n){return A.indexOf(n,t)>=0})})},A.difference=function(t){var n=l.apply(o,c.call(arguments,1));return A.filter(t,function(t){return!A.contains(n,t)})},A.zip=function(){for(var t=c.call(arguments),n=A.max(A.pluck(t,"length")),e=new Array(n),r=0;n>r;r++)e[r]=A.pluck(t,""+r);return e},A.object=function(t,n){if(null==t)return{};for(var e={},r=0,i=t.length;i>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},A.indexOf=function(t,n,e){if(null==t)return-1;var r=0,i=t.length;if(e){if("number"!=typeof e)return r=A.sortedIndex(t,n),t[r]===n?r:-1;r=0>e?Math.max(0,i+e):e}if(w&&t.indexOf===w)return t.indexOf(n,e);for(;i>r;r++)if(t[r]===n)return r;return-1},A.lastIndexOf=function(t,n,e){if(null==t)return-1;var r=null!=e;if(x&&t.lastIndexOf===x)return r?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var i=r?e:t.length;i--;)if(t[i]===n)return i;return-1},A.range=function(t,n,e){arguments.length<=1&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=e;return o},A.bind=function(t,n){if(t.bind===F&&F)return F.apply(t,c.call(arguments,1));var e=c.call(arguments,2);return function(){return t.apply(n,e.concat(c.call(arguments)))}},A.partial=function(t){var n=c.call(arguments,1);return function(){return t.apply(this,n.concat(c.call(arguments)))}},A.bindAll=function(t){var n=c.call(arguments,1);return 0===n.length&&(n=A.functions(t)),E(n,function(n){t[n]=A.bind(t[n],t)}),t},A.memoize=function(t,n){var e={};return n||(n=A.identity),function(){var r=n.apply(this,arguments);return A.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},A.delay=function(t,n){var e=c.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(c.call(arguments,1)))},A.throttle=function(t,n){var e,r,i,o,a=0,s=function(){a=new Date,i=null,o=t.apply(e,r)};return function(){var u=new Date,c=n-(u-a);return e=this,r=arguments,0>=c?(clearTimeout(i),i=null,a=u,o=t.apply(e,r)):i||(i=setTimeout(s,c)),o}},A.debounce=function(t,n,e){var r,i;return function(){var o=this,a=arguments,s=function(){r=null,e||(i=t.apply(o,a))},u=e&&!r;return clearTimeout(r),r=setTimeout(s,n),u&&(i=t.apply(o,a)),i}},A.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},A.wrap=function(t,n){return function(){var e=[t];return u.apply(e,arguments),n.apply(this,e)}},A.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},A.after=function(t,n){return 0>=t?n():function(){return--t<1?n.apply(this,arguments):void 0}},A.keys=M||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var n=[];for(var e in t)A.has(t,e)&&(n[n.length]=e);return n},A.values=function(t){var n=[];for(var e in t)A.has(t,e)&&n.push(t[e]);return n},A.pairs=function(t){var n=[];for(var e in t)A.has(t,e)&&n.push([e,t[e]]);return n},A.invert=function(t){var n={};for(var e in t)A.has(t,e)&&(n[t[e]]=e);return n},A.functions=A.methods=function(t){var n=[];for(var e in t)A.isFunction(t[e])&&n.push(e);return n.sort()},A.extend=function(t){return E(c.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},A.pick=function(t){var n={},e=l.apply(o,c.call(arguments,1));return E(e,function(e){e in t&&(n[e]=t[e])}),n},A.omit=function(t){var n={},e=l.apply(o,c.call(arguments,1));for(var r in t)A.contains(e,r)||(n[r]=t[r]);return n},A.defaults=function(t){return E(c.call(arguments,1),function(n){if(n)for(var e in n)null==t[e]&&(t[e]=n[e])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,n){return n(t),t};var T=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof A&&(t=t._wrapped),n instanceof A&&(n=n._wrapped);var i=f.call(t);if(i!=f.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var o=e.length;o--;)if(e[o]==t)return r[o]==n;e.push(t),r.push(n);var a=0,s=!0;if("[object Array]"==i){if(a=t.length,s=a==n.length)for(;a--&&(s=T(t[a],n[a],e,r)););}else{var u=t.constructor,c=n.constructor;if(u!==c&&!(A.isFunction(u)&&u instanceof u&&A.isFunction(c)&&c instanceof c))return!1;for(var l in t)if(A.has(t,l)&&(a++,!(s=A.has(n,l)&&T(t[l],n[l],e,r))))break;if(s){for(l in n)if(A.has(n,l)&&!a--)break;s=!a}}return e.pop(),r.pop(),s};A.isEqual=function(t,n){return T(t,n,[],[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var n in t)if(A.has(t,n))return!1;return!0},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=_||function(t){return"[object Array]"==f.call(t)},A.isObject=function(t){return t===Object(t)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){A["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(t){return"function"==typeof t}),A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!=+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==f.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,n){return h.call(t,n)},A.noConflict=function(){return t._=r,this},A.identity=function(t){return t},A.times=function(t,n,e){for(var r=Array(t),i=0;t>i;i++)r[i]=n.call(e,i);return r},A.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};R.unescape=A.invert(R.escape);var j={escape:new RegExp("["+A.keys(R.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(R.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(t){A[t]=function(n){return null==n?"":(""+n).replace(j[t],function(n){return R[t][n]})}}),A.result=function(t,n){if(null==t)return null;var e=t[n];return A.isFunction(e)?e.call(t):e},A.mixin=function(t){E(A.functions(t),function(n){var e=A[n]=t[n];A.prototype[n]=function(){var t=[this._wrapped];return u.apply(t,arguments),C.call(this,e.apply(A,t))}})};var L=0;A.uniqueId=function(t){var n=++L+"";return t?t+n:n},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n"," ":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(t,n,e){var r;e=A.defaults({},e,A.templateSettings);var i=new RegExp([(e.escape||P).source,(e.interpolate||P).source,(e.evaluate||P).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(n,e,r,i,s){return a+=t.slice(o,s).replace(N,function(t){return"\\"+O[t]}),e&&(a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+n.length,n}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(n)return r(n,A);var u=function(t){return r.call(this,t,A)};return u.source="function("+(e.variable||"obj")+"){\n"+a+"}",u},A.chain=function(t){return A(t).chain()};var C=function(t){return this._chain?A(t).chain():t};A.mixin(A),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=o[t];A.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],C.call(this,e)}}),E(["concat","join","slice"],function(t){var n=o[t];A.prototype[t]=function(){return C.call(this,n.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this)}()},{}],21:[function(t){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),Leap=t("../lib/index")},{"../lib/index":8}]},{},[21]),function(){var t,n,e,r,i,o=document.body,a=new Leap.Controller({enableGestures:!0}),s=0,u=Reveal.getConfig().leap,c=document.createElement("div"),l={autoCenter:!0,gestureDelay:500,naturalSwipe:!0,pointerColor:"#00aaff",pointerOpacity:.7,pointerSize:15,pointerTolerance:120};if(u)for(key in u)l[key]=u[key];c.id="leap",c.style.position="absolute",c.style.visibility="hidden",c.style.zIndex=50,c.style.opacity=l.pointerOpacity,c.style.backgroundColor=l.pointerColor,o.appendChild(c),a.on("frame",function(a){if(e=(new Date).getTime(),a.fingers.length>0&&a.fingers.length<3?(r=-3*a.fingers[0].tipPosition[2],r<l.pointerSize&&(r=l.pointerSize),c.style.width=r+"px",c.style.height=r+"px",c.style.borderRadius=r-5+"px",c.style.visibility="visible",l.autoCenter?(i=a.fingers[0].tipPosition,t||(t=!0,n=a.fingers[0].tipPosition),c.style.top=-1*((i[1]-n[1])*o.offsetHeight/l.pointerTolerance)+o.offsetHeight/2+"px",c.style.left=(i[0]-n[0])*o.offsetWidth/l.pointerTolerance+o.offsetWidth/2+"px"):(c.style.top=(1-(i[1]-50)/l.pointerTolerance)*o.offsetHeight+"px",c.style.left=i[0]*o.offsetWidth/l.pointerTolerance+o.offsetWidth/2+"px")):(t=!1,c.style.visibility="hidden"),a.gestures.length>0&&e-s>l.gestureDelay){var u=a.gestures[0];if(1===a.hands.length){if(a.fingers.length>2&&"swipe"===u.type){var f=u.direction[0],h=u.direction[1];Math.abs(f)>Math.abs(h)?f>0?l.naturalSwipe?Reveal.left():Reveal.right():l.naturalSwipe?Reveal.right():Reveal.left():h>0?l.naturalSwipe?Reveal.down():Reveal.up():l.naturalSwipe?Reveal.up():Reveal.down(),s=e}}else 2===a.hands.length&&(u.direction[1]>0&&"swipe"===u.type&&Reveal.toggleOverview(),s=e)}}),a.connect()}();
